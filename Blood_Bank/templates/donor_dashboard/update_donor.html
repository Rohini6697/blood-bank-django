{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Update Personal Details | LifeLink</title>
  <link rel="stylesheet" href="{% static 'css/donor_dashboard/update_donor.css' %}">
</head>
<body>
  <div class="container">
    <!-- ===== Sidebar ===== -->
    <aside class="sidebar">
      <h2>LifeLink</h2>
      <ul>
        <li><a href="{% url 'donordashboard'  %}">Dashboard</a></li>
        <li><a href="{% url 'update_donor' donor.id %}">Update Profile</a></li>
        <li><a href="{% url 'donation_history' %}">Donation History</a></li>
        <li><a href="{% url 'request_appointment' %}">Request Appointment</a></li>
        <li><a href="{% url 'donor_notification' %}">Notifications</a></li>
        <li><a href="{% url 'home' %}">Logout</a></li>
      </ul>
    </aside>

    <!-- ===== Main Content ===== -->
    <main class="main-content">
      <header>
        <h1>Update Your Personal Details</h1>
        <p>Keep your profile information up to date for a smoother donation process.</p>
      </header>

      <section class="update-card">
        <form action="{% url 'update_donor' donor.id %}" method="post" id="eligibility-form">
          {% csrf_token %}

          <!-- User fields -->
          <div class="form-group">
            <label for="fullname">Full Name</label>
            <input type="text" id="fullname" name="fullname" value="{{ donor.fullname }}" placeholder="Enter your full name" required>
          </div>

          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" id="email" name="email" value="{{ user.email }}" placeholder="Enter your email" required>
          </div>

          <!-- Profile fields -->
          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="text" id="phone" name="phone" value="{{ donor.phonenumber }}" placeholder="Enter your phone number" required>
          </div>

          <div class="form-group">
            <label for="age">Age</label>
            <input type="number" id="age" name="age" value="{{ donor.age }}" placeholder="Enter your age" required>
          </div>

          <div class="form-group">
            <label for="bloodgroup">Blood Group</label>
            <select id="bloodgroup" name="bloodgroup" required>
              <option value="">Select your blood group</option>
              <option value="A+" {% if donor.blood_group == "A+" %}selected{% endif %}>A+</option>
              <option value="A-" {% if donor.blood_group == "A-" %}selected{% endif %}>A-</option>
              <option value="B+" {% if donor.blood_group == "B+" %}selected{% endif %}>B+</option>
              <option value="B-" {% if donor.blood_group == "B-" %}selected{% endif %}>B-</option>
              <option value="O+" {% if donor.blood_group == "O+" %}selected{% endif %}>O+</option>
              <option value="O-" {% if donor.blood_group == "O-" %}selected{% endif %}>O-</option>
              <option value="AB+" {% if donor.blood_group == "AB+" %}selected{% endif %}>AB+</option>
              <option value="AB-" {% if donor.blood_group == "AB-" %}selected{% endif %}>AB-</option>
            </select>

          </div>

          <div class="form-group">
            <label for="address">Address</label>
            <textarea id="address" name="address" rows="3" placeholder="Enter your address" required>{{ donor.address }}</textarea>
          </div>

          <!-- Donor fields -->
          <div class="form-group">
            <label for="weight">Weight (kg)</label>
            <input type="number" id="weight" name="weight" value="{{ donor.weight }}" placeholder="Enter your weight">
          </div>

          <div class="form-group">
            <label for="health">Do you have any health issues?</label>
            <select id="health" name="health">
              <option value="">Select</option>
              <option value="yes" {% if donor.health == "yes" %}selected{% endif %}>Yes</option>
              <option value="no" {% if donor.health == "no" %}selected{% endif %}>No</option>
            </select>
          </div>


          <div class="form-group">
            <label for="medications">Are you currently taking any medications?</label>
            <select id="medications" name="medications">
              <option value="">Select</option>
              <option value="yes" {% if donor.medications == "yes" %}selected{% endif %}>Yes</option>
              <option value="no" {% if donor.medications == "no" %}selected{% endif %}>No</option>
            </select>
          </div>

          <div class="form-group">
            <label for="tattoo">Have you got a tattoo or piercing in the last 6 months?</label>
            <select id="tattoo" name="tattoo">
              <option value="">Select</option>
              <option value="yes" {% if donor.tattoo %}selected{% endif %}>Yes</option>
              <option value="no" {% if not donor.tattoo %}selected{% endif %}>No</option>

            </select>
          </div>

          <div class="form-group">
            <label for="pregnancy">Are you currently pregnant or breastfeeding?</label>
            <select id="pregnancy" name="pregnancy">
              <option value="">Select</option>
              <option value="yes" {% if donor.pregnancy %}selected{% endif %}>Yes</option>
              <option value="no" {% if donor.pregnancy %}selected{% endif %}>No</option>
            </select>
          </div>

          <div class="form-group">
            <label for="lastDonation">Last Donation Date</label>
            <input type="date" id="lastDonation" name="lastDonation" value="{{ donor.lastDonation|date:'Y-m-d' }}">
            <label>
              <input type="checkbox" id="first_time" name="first_time" {% if donor.is_first_time %}checked{% endif %}>
              I am donating for the first time
            </label>
          </div>


          
          <div class="form-group btn-area">
            <button type="submit" class="btn">Update Details</button>
          </div>
        </form>
      </section>
    </main>
  </div>
  <script src="{% static 'js/donor_dashboard/update_donor.js' %}"></script>
</body>
</html>
